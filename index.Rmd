---
title: "ITN Color vs ITN Use"
description: |
  Does the color of an ITN make a difference in the overall use rate? <br>  Last update: `r format(Sys.time(), '%d %B, %Y')`
site: distill::distill_website
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(knitr)
library(readxl)
library(haven)
library(janitor)
library(maptools)
library(maps)
library(broom)
library(spData)
library(sf)
library(cowplot)
library(RColorBrewer)
library(ggpubr)
library(todor)
library(flextable)
library(rdhs)

theme_set(theme_classic())


colorpal <- c(blue="#5587C9", white="snow", pink="pink", green="forestgreen", "blue and white striped"="lightblue", red="firebrick", striped="lightblue", black="dimgrey", other="tan", "don't care/dk"="wheat")

colorpalline <- c(blue="#5587C9", white="grey", pink="pink", green="forestgreen", "blue and white striped"="lightblue", red="firebrick", striped="lightblue", black="dimgrey", other="tan", "don't care/dk"="wheat")
```

This website provides [reports](reports.html) for countries in sub-Saharan Africa to evaluate whether there are differences in use of insecticide-treated nets (ITNs) due to the color of ITNs (typically white, blue, green, or other colors).

Some countries may wish to procure ITNs of a particular color, or procure different colors for different areas of the country, to accommodate preferences or to improve ITN use where certain colors may have negative connotations. These reports use large household survey data to evaluate whether there are differences in use between nets of different colors in a particular country, and whether net color is associated with these differences after controlling for other determinants of net use.



In ten countries, publicly available surveys have collected information on household preferences for net textile. This data is summarized on the [Preferences](prefs.html) page. Only in Malawi, however, have both net color and preferred net color been recorded in the same survey.

This work is supported by the Alliance for Malaria Prevention with funding from The Bill & Melinda Gates Foundation.


```{r read}
# read in data, tag most recent survey per country, clean country names for joining
prefs <-
  read_excel(
    "../Color/output/color_netuse.xls", sheet="Prefs"
  ) %>%
  clean_names() %>% 
  mutate(name=case_when(country=="Sierra" ~ "Sierra Leone",
                        TRUE ~ as.character(country))) 

# get most popular color for each dataset...it's consistent by country
pdatasets <- prefs %>% 
  group_by(dataset) %>% 
  slice(which.max(percent_preferred))

# grab it for countries so we can map it
popcolor <- prefs %>% 
  group_by(country) %>% 
  slice(which.max(percent_preferred)) 

use <-
  read_excel(
    "../Color/output/color_netuse.xls", sheet="Nets"
  ) %>%
  clean_names() %>% 
  mutate(name=case_when(country=="Sierra" ~ "Sierra Leone",
                        TRUE ~ as.character(country))) 

regs <- read_dta("../Color/output/color_logistic.dta") %>% 
  clean_names() %>% 
  separate(cis, sep=" - ", into=c("lb","ub")) %>% 
  mutate(lb=as.numeric(lb),
         ub=as.numeric(ub))

cregs <- regs %>% 
  filter(var %in% c("blue", "green", "other", "unknown"))
# %>%
#   mutate(
#     diffuse = abs(
#       percent_of_polyester_nets_used - percent_of_polyethylene_nets_used
#     ),
#     country = str_replace_all(country, "[:digit:]", ""),
#     country = str_replace_all(country, " -", ""),
#     country = str_trim(country)
#   ) %>%
#   group_by(country) %>%
#   slice(which.max(year)) %>%
#   mutate(
#     diff5 = if_else(diffuse > 5, ">5 points difference", "<=5 points difference"),
#     country = case_when(
#       country == "GuineaBissau" ~ "Guinea-Bissau",
#       country == "Gambia" ~ "The Gambia",
#       country == "Congo" ~ "Republic of Congo",
#       country == "DRC" ~ "Democratic Republic of the Congo",
#       country == "CAR" ~ "Central African Republic",
#       TRUE ~ as.character(country)
#     ),
#     diff = if_else(p_value_crudeuse > 0.05, -1, diffuse),
#     diff = cut(diff, breaks = c(-2, 0, 5, 10, 15, Inf)),
#     name = country,
#     aor_for_textile = if_else(is.na(p_0_05_aor), 1, aor_for_textile),
#     aor_for_textile = ifelse(is.na(country), NA, aor_for_textile),
#     melogit_aor = if_else(is.na(melogit_star),1,note_aor_is_controlling_for_net_supply_region_ses_residence_month),
#     justify = case_when(
#       (p_value_crudeuse < 0.05 & aor_for_textile!=1 & !is.na(aor_for_textile)) ~ "Both significant",
#       (p_value_crudeuse < 0.05 & aor_for_textile==1) ~ "Crude use is different, but textile not a predictor in model",
#       (p_value_crudeuse > 0.05 & aor_for_textile!=1 & !is.na(aor_for_textile)) ~ "No difference in crude use, but textile is a predictor in model",
#       (p_value_crudeuse > 0.05 & aor_for_textile==1) ~ "Neither significant"
#     ),
#     justify = factor(justify, levels = c("Both significant","Crude use is different, but textile not a predictor in model","No difference in crude use, but textile is a predictor in model","Neither significant"))
#     )
```

```{r worldmap}
africa = world %>% 
  filter(continent == "Africa", !is.na(iso_a2)) %>% 
  left_join(worldbank_df, by = "iso_a2") %>% 
  dplyr::select(name, subregion)%>% 
  left_join(popcolor, by="name") %>% 
  st_transform("+proj=aea +lat_1=20 +lat_2=-23 +lat_0=0 +lon_0=25")

```

```{r make_sf}
crs_africa <-  st_crs(africa)
```

<h1>Summary</h1>
Data from the most recent MIS and DHS were obtained with permission from dhsprogram.com. MICS surveys do not collect net color nor preferences. Only `r length(unique(use$dataset))` surveys from `r length(unique(use$country))` countries recorded net color; `r length(unique(prefs$dataset))` surveys from `r length(unique(prefs$country))` countries recorded color preferences at household level. In four Malawi surveys both net color and color preferences were recorded, allowing for additional analysis on whether nets of the household's preferred color are used at higher rates than nets of the non-preferred color.

<h2>Preferred colors for nets</h2>

Color preferences for household respondents at national level are shown in Figure \@ref(fig:fig-prefsbar). Blue was preferred by a majority of respondents in Kenya, Malawi, Rwanda, and Sierra Leone, while white was preferred in both of Madagascar's surveys. Note that in Malawi 2012, the question was asked only in households that owned zero nets.

```{r fig-prefsbar, fig.cap="Preferred net colors for household survey respondents"}
prefs %>% 
  ggplot() +
  geom_col(aes(y=countrysurvey, x=percent_preferred, fill=color), color="lightgrey") +
  scale_fill_manual(values=colorpal) +
  labs(fill="",
       x="Percent of household respondents",
       y="",
       title="Respondents' preferred net color")

#TODO: account for no pref in Mada and Kenya, per original paper

```

Fig \@ref(fig:figused) summarizes the percent of nets used of different colors for each dataset. 

```{r figused, fig.cap="Percent of nets used the previous night, by color"}
use %>% 
  ggplot() +
  geom_col(aes(x=color, y=percent_used, fill=color), color="lightgrey", position = position_dodge(width = 0.9)) +
  scale_fill_manual(values=colorpal) +
  # coord_flip() +
  geom_errorbar(aes(ymin=used_lci, ymax=used_uci, x=color), width=.1, color="black", alpha=.5, position = position_dodge(width = 0.9)) +
  facet_wrap(~countrysurvey) +
  labs(x="",
       y="Percent",
       title="Percent of nets used the previous night",
       fill="")
```

Figure \@ref(fig:figreg) shows the odds of non-white nets being used the previous night (vs white nets being used), controlling for other factors that affect ITN use, including time of the year, region, wealth quintile, urban/rural, household net supply, and age of the net. Blue nets were less likely to be used than white nets in Madagascar, Nigeria, and the three Tanzania surveys. Blue nets were more likely to be used in the 2010 and 2012 Malawi surveys, but were not used differently in the 2014 and 2017 surveys. Green nets had the same odds of being used as white nets in all surveys. Findings are summarized in Table \@ref(tab:tabreg).

```{r figreg, fig.cap="Odds of a net being used the previous night, by color, controlling for other key factors"}
cregs %>% 
  filter(ub<10) %>% 
  mutate(sig=pval<0.05) %>% 
  ggplot() +
  geom_point(aes(x=var, y=odds, color=var, alpha=sig)) +
  geom_linerange(aes(x=var, ymin=lb, ymax=ub, color=var, alpha=sig)) +
  geom_hline(yintercept = 1) +
  coord_flip() +
  scale_color_manual(values=colorpal) +
  scale_alpha_manual(values=c(.3,1)) +
  theme(legend.position = "none") +
  facet_wrap(~dataset)
```


```{r tabreg, tab.cap="Odds of a net being used the previous night, by color, compared to white nets. Results are from a multivariate logistic regression model controlling for household net supply, age of the net, time of year (month), region, wealth quintile, and urban/rural residence."}

ct <- use %>% 
  filter(color=="blue") %>% 
  select(dataset, country, countrysurvey)

cregscty <- cregs %>% 
  left_join(ct) %>% 
  select(countrysurvey, var, odds, pval)

cregscty %>% 
  mutate(odds=case_when(pval<0.05 ~ paste0(round(odds, digits=2), "*"),
                        TRUE ~ as.character(round(odds, digits=2)))) %>% 
  select(-pval) %>% 
  mutate(white="1.00") %>% 
  pivot_wider(names_from=var, values_from=odds) %>% 
  flextable() %>% 
  set_header_labels(countrysurvey="Survey",
                    white="White (ref)",
                    blue="Blue",
                    green="Green",
                    other="Other",
                    unknown="Unknown color") %>% 
  add_footer_row(values = "* indicates p-value < 0.05", colwidths = c(6), top = FALSE)
```


```{r prefsses}
ses <- read_excel("../Color/output/color_netuse.xls", sheet="Prefs_ses") %>% 
  clean_names()

ses %>% 
  ggplot() +
  geom_line(aes(x=ses, y=percent_preferred, color=color)) +
  scale_color_manual(values=colorpalline) +
  facet_wrap(~dataset)
```

```{r readreg, eval=FALSE}
region <- read_excel("../Color/output/color_netuse.xls", sheet="Prefs_region"
  ) %>%
  clean_names() %>% 
  group_by(dataset, region) %>% 
  slice_max(percent_preferred)

mlw <- region %>% 
  filter(country=="Malawi")

ken <- region %>% 
  filter(country=="Kenya")

mad <- region %>% 
  filter(country=="Madagascar")

sl <- region %>% 
  filter(country=="Sierra")

rwa  <-  region %>% 
  filter(country=="Rwanda")
```

```{r burkina, eval=FALSE}
bf <- dhs_data(countryIds = "BF",
              indicatorIds = "FE_FRTR_W_A15",
              surveyYearStart = 2017,
              breakdown = "subnational") %>% 
  mutate(region = base::iconv (CharacteristicLabel, to="ASCII//TRANSLIT"),
         region = gsub("'", '', region),
         region = gsub("-", ' ', region),
         region = tolower(region),
         region = gsub("\\(including ouagadougou\\)", '', region),
         region = gsub("hauts bas", 'hauts-bas', region),)

# get our related spatial data frame object
spbf <- download_boundaries(surveyId = bf$SurveyId[1], method = "sf")

# bfshp<-list.files("rdhs/bf_sdr_subnational_boundaries_2022-01-11/shps/", pattern = ".shp$",full.names=TRUE)
```

``` {r liberia, eval=FALSE}
lb <- dhs_data(countryIds = "LB",
              indicatorIds = "FE_FRTR_W_A15",
              surveyYearStart = 2019,
              breakdown = "subnational") %>% 
  mutate(region = base::iconv (CharacteristicLabel, to="ASCII//TRANSLIT"),
         region = gsub("'", '', region),
         region = tolower(region))


# get our related spatial data frame object
splb <- download_boundaries(surveyId = lb$SurveyId[1], method = "sf")
# lbshp<-list.files("rdhs/lb_subnational_boundaries_2022-01-11/shps/", pattern = ".shp$",full.names=TRUE)
```

``` {r guinea, eval=FALSE}
gn <- dhs_data(countryIds = "GN",
              indicatorIds = "FE_FRTR_W_A15",
              surveyYearStart = 2018,
              breakdown = "subnational") %>% 
  mutate(region = base::iconv (CharacteristicLabel, to="ASCII//TRANSLIT"),
         region = gsub("'", '', region),
         region = tolower(region))


# get our related spatial data frame object
spgn <- download_boundaries(surveyId = gn$SurveyId[1], method = "sf")
# gnshp<-list.files("rdhs/gn_subnational_boundaries_2022-01-11/shps/", pattern = ".shp$",full.names=TRUE)

```

``` {r guinea21, eval=FALSE}
gn21 <- dhs_data(countryIds = "GN",
              indicatorIds = "FE_FRTR_W_A15",
              surveyYearStart = 2021,
              breakdown = "subnational") %>% 
  mutate(region = base::iconv (CharacteristicLabel, to="ASCII//TRANSLIT"),
         region = gsub("'", '', region),
         region = tolower(region))


# get our related spatial data frame object
spgn21 <- download_boundaries(surveyId = gn21$SurveyId[1], method = "sf")
# gnshp<-list.files("rdhs/gn_subnational_boundaries_2022-01-11/shps/", pattern = ".shp$",full.names=TRUE)

```

``` {r mali, eval=FALSE}
ml <- dhs_data(countryIds = "ML",
              indicatorIds = "ML_NETP_H_MOS",
              surveyYearStart = 2021,
              breakdown = "subnational") %>% 
  mutate(region = base::iconv (CharacteristicLabel, to="ASCII//TRANSLIT"),
         region = gsub("'", '', region),
         region = tolower(region)) %>% 
  filter(region %in% c("..kayes","..koulikoro","..sikasso","..segou","..mopti","....tombouctou","....gao","....kidal","bamako")) %>% 
  mutate(region = gsub("[..]","",region))


# get our related spatial data frame object
spml <- download_boundaries(surveyId = ml$SurveyId[1], method = "sf")
# gnshp<-list.files("rdhs/gn_subnational_boundaries_2022-01-11/shps/", pattern = ".shp$",full.names=TRUE)

```


``` {r rwanda, eval=FALSE}
rw <- dhs_data(countryIds = "RW",
              indicatorIds = "FE_FRTR_W_A15",
              surveyYear = 2013, 
              breakdown = "subnational") %>% 
  mutate(region = base::iconv (CharacteristicLabel, to="ASCII//TRANSLIT"),
         region = gsub("'", '', region),
         region = tolower(region))


# get our related spatial data frame object
sprw <- download_boundaries(surveyId = rw$SurveyId[1], method = "sf") %>% 
  filter(SVYYEAR==2013)

# rwshp<-list.files("rdhs/rw_sdr_subnational_boundaries_2022-01-11/shps/", pattern = ".shp$",full.names=TRUE)
```

``` {r sfread, eval=FALSE}
#read the shapefile. Alternatively make an assignment, such as f<-sf::read_sf(your_SHP_file)
# sprw <- sf::read_sf(rwshp)
# spgn <- sf::read_sf(gnshp)
# splb <- sf::read_sf(lbshp)
# spbf <- sf::read_sf(bfshp)
```


```{r regjoins, eval=FALSE}
# gn <- reg %>%
#   filter(datafile=="GNHR71") %>%
#   left_join(gn, by = "region") %>%
#   mutate(diffuse = (percent_of_polyester_nets_used-percent_of_polyethylene_nets_used),
#          diffuse2 = ifelse(p_value_crudeuse < 0.05, diffuse, NA),
#          diff = if_else(p_value_crudeuse > 0.05, -1, diffuse),
#     diff = cut(diff, breaks = c(-2, 0, 5, 10, 15, Inf)),
#     diff = fct_recode(diff, "no difference" = "(-2,0]",
#                       "<5 pts" = "(0,5]",
#                       "5-9.9 pts" = "(5,10]",
#                       "10-15 pts" = "(10,15]",
#                       "15+ pts" = "(15,Inf]"),
#     aor = ifelse(pval_aor < 0.05, aor_for_textile, NA))




rw <- rwa %>% 
  mutate(region=tolower(region)) %>% 
  left_join(rw, by = "region") %>% 
  filter(SurveyYearLabel==2013)




```

```{r joiningstuff, eval=FALSE}



mrw <- rw$color[match(sprw$sdr_subnational_boundaries$REG_ID, rw$RegionId)]
sprw$sdr_subnational_boundaries$color <- mrw






```



```{r regmapsdiffuse2, eval=FALSE, fig.cap="Regional maps of the crude difference in polyester vs polyethylene net use. Blue indicates more polyester nets are used than polyethylene nets; red indicates more polyethylene nets are used.", fig.topcaption=TRUE}

# if having an error discrete/cont scale here, check if the Stata do file has been run for these countries.

# g1 <- ggplot(spbf$sdr_subnational_boundaries) +
#   geom_sf(aes(fill = diffuse2), color = "lightgray") +
#   theme_void() +
#   scale_fill_distiller(palette = "RdBu", direction = 1,
#     na.value = "whitesmoke",
#     limits = c(-35,35)) +
#   labs(
#     fill = "Use difference",
#     color = "",
#     title = "Burkina Faso 2018",
#     caption = ""
#   ) +
#   theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))
# 
# g2 <- ggplot(spgn$sdr_subnational_boundaries) +
#   geom_sf(aes(fill = diffuse2), color = "lightgray") +
#  theme_void() +
#    scale_fill_distiller(palette = "RdBu", direction = 1,
#     na.value = "whitesmoke",
#     limits = c(-35,35)) +
#   labs(
#     fill = "Use difference",
#     color = "",
#     title = "Guinea 2018",
#     caption = ""
#   ) +
#   theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))
# 
# g21 <- ggplot(spgn21$sdr_subnational_boundaries) +
#   geom_sf(aes(fill = diffuse2), color = "lightgray") +
#  theme_void() +
#    scale_fill_distiller(palette = "RdBu", direction = 1,
#     na.value = "whitesmoke",
#     limits = c(-35,35)) +
#   labs(
#     fill = "Use difference",
#     color = "",
#     title = "Guinea 2021",
#     caption = ""
#   ) +
#   theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))
# 
# 
# g3 <- ggplot(splb$sdr_subnational_boundaries) +
#   geom_sf(aes(fill = diffuse2), color = "lightgray") +
#  theme_void() +
#  scale_fill_distiller(palette = "RdBu", direction = 1,
#     na.value = "whitesmoke",
#     limits = c(-35,35)) +
#   labs(
#     fill = "Use difference",
#     color = "",
#     title = "Liberia 2019",
#     caption = ""
#   ) +
#   theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))



ggplot(sprw$sdr_subnational_boundaries) +
  geom_sf(aes(fill = as.factor(color)), color = "lightgray") +
 theme_void() +
 # scale_fill_manual(values = colorpal,
 #    na.value = "whitesmoke") +
  # labs(
  #   fill = "Most preferred net color",
  #   color = "",
  #   title = "Rwanda",
  #   caption = ""
  # ) +
  # geom_sf_label(aes(label = "REGNAME"), size=.5) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))



text <- paste("Blue indicates polyester nets are used more;",
"red indicates that polyethylene nets are used more", sep = "\n")

gt <- text_grob(text, just="center")

# plot_grid(g1, g21, g3, g4)

# gn %>% 
#   ggplot(spgn$sdr_subnational_boundaries) +
#   geom_sf(aes(fill = diff))
```



```{r regmapsaor, eval=FALSE, fig.cap="Regional maps of the coefficient for textile in the adjusted model at regional level. Blue indicates polyethylene nets are less likely to be used than polyester nets; red indicates a higher likelihood that polyethylene nets are used.", fig.topcaption=TRUE}


ga1 <- ggplot(spbf$sdr_subnational_boundaries) +
  geom_sf(aes(fill = aor), color = "lightgray") +
  theme_void() +
  scale_fill_gradient2(
    low = "lightblue",
    mid = "ghostwhite",
    high = "lightcoral",
    midpoint = 1.0,
    limits = c(0,3),
    na.value = "WhiteSmoke"
  ) +
  labs(
    fill = "Adjusted Odds Ratio",
    color = "",
    title = "Burkina Faso 2018",
    caption = ""
  ) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))

ga2 <- ggplot(spgn$sdr_subnational_boundaries) +
  geom_sf(aes(fill = aor), color = "lightgray") +
 theme_void() +
    scale_fill_gradient2(
    low = "lightblue",
    mid = "ghostwhite",
    high = "lightcoral",
    midpoint = 1.0,
    limits = c(0,3),
    na.value = "WhiteSmoke"
  ) +
  labs(
    fill = "Adjusted Odds Ratio",
    color = "",
    title = "Guinea 2018",
    caption = ""
  ) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))

ga21 <- ggplot(spgn21$sdr_subnational_boundaries) +
  geom_sf(aes(fill = aor), color = "lightgray") +
 theme_void() +
    scale_fill_gradient2(
    low = "lightblue",
    mid = "ghostwhite",
    high = "lightcoral",
    midpoint = 1.0,
    limits = c(0,3),
    na.value = "WhiteSmoke"
  ) +
  labs(
    fill = "Adjusted Odds Ratio",
    color = "",
    title = "Guinea 2021",
    caption = ""
  ) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))

ga3 <- ggplot(splb$sdr_subnational_boundaries) +
  geom_sf(aes(fill = aor), color = "lightgray") +
 theme_void() +
  scale_fill_gradient2(
    low = "lightblue",
    mid = "ghostwhite",
    high = "lightcoral",
    midpoint = 1.0,
   limits = c(0,3),
    na.value = "WhiteSmoke"
  ) +
  labs(
    fill = "Adjusted Odds Ratio",
    color = "",
    title = "Liberia 2019",
    caption = ""
  ) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))



ga4 <- ggplot(sprw$sdr_subnational_boundaries) +
  geom_sf(aes(fill = percent_preferred), color = "lightgray") +
 theme_void() +
 # scale_fill_gradient2(
 #    low = "lightblue",
 #    mid = "ghostwhite",
 #    high = "lightcoral",
 #    midpoint = 1.0,
 #   limits = c(0,3),
 #    na.value = "WhiteSmoke"
 #  ) +
  labs(
    fill = "Preferred net color",
    color = "",
    title = "Rwanda",
    caption = ""
  ) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))

ga5 <- ggplot(spml$sdr_subnational_boundaries) +
  geom_sf(aes(fill = aor), color = "lightgray") +
 theme_void() +
 scale_fill_gradient2(
    low = "lightblue",
    mid = "ghostwhite",
    high = "lightcoral",
    midpoint = 1.0,
   limits = c(0,3),
    na.value = "WhiteSmoke"
  ) +
  labs(
    fill = "Adjusted Odds Ratio",
    color = "",
    title = "Mali 2021",
    caption = ""
  ) +
  theme(plot.margin = grid::unit(c(0, 0, 0, 0), "null"))

plot_grid(ga1, ga21, ga3, ga4)

# gn %>% 
#   ggplot(spgn$sdr_subnational_boundaries) +
#   geom_sf(aes(fill = diff))
```

```{r}
# geo_facet plot for each country, with a legend floating in the ocean, of the AOR for textile, at regional level
```



```{r, eval=FALSE, layout="l-body-outset", fig.cap = "Forest Plot summarizing odds of a PE net being used; most recent survey per country", fig.topcaption=TRUE}
include_graphics("images/_textileforestplot.png")
```

<h2>8. Conclusions</h2>

Data are limited on net color and net color preferences. 

<h1>Taking into account survey respondents' preferences for nets of a particular color</h1>

Very few surveys ask respondents what color of net they prefer, and even fewer ask respondents about the strength of this preference. If, however, data are available about 'stated preferences' (what respondents state as their preference), this can be assessed alongside the observed net use behavior. 

In previous work on ITN preferences, a binary variable was constructed at the household level for whether the household preferred e.g. blue nets. This variable was then included in the models shown earlier as a covariate. In many cases, the fact that a household preferred nets of a certain type was not associated with the outcome of net use. This could be because the preference was not the sole determining factor, or because the household had only nets of a different type available, and chose to use them (perhaps begrudgingly) rather than remain unprotected from malaria. 

Stated preferences on their own should not be used to justify procurement of nets of a single color; analysis of observed net use from survey datasets will provide the necessary information about how nets are used. However, where both types of information are available, they can be used in combination to assess the strength of these preferences relative to other determining factors.

<h1>Steps if data are not available</h1>

If survey data are old, incomplete, or if recent mass distributions have involved only nets of a single color and thus the net crop is highly unbalanced, countries may need to collect additional data and/or ensure that a mix of ITNs are distributed in future campaigns. 

<h1>Additional data sources that may be useful for triangulation</h1>

<h2>Redemption rates for campaign ITNs at distribution points - do redemption rates differ for ITNs of different color?</h2>

Where redemption data for mass campaigns is available and can be linked directly with the type of ITN distributed, preferably at a district level, this may be useful to look at. The question is whether redemption rates for ITNs differ because of the color of the net being given out at distribution points. (For campaigns conducting door to door distribution, we would not anticipate high rates of refusals of ITNs once the distribution teams are on the doorstep.) 

Redemption rates for different communities for ITN campaigns are likely to differ due to reasons unrelated to the net color, and so it is important to consider these other potential factors when interpreting redemption rate data. Anecdotal observations during some campaigns may attribute reduced redemption rates to not wanting to bother with the effort of picking up ITNs if they are the less-preferred color, and these observations are important. It's crucial to consider the other options households may have for bite prevention when they decline to pick up ITNs; perhaps they can access their preferred ITN in the market or pharmacy, or they have other options such as coils or sprays that they feel sufficiently protect them, or (and) they feel that their overall risk of severe consequences of malaria is low. In some of these contexts, it's possible that providing the preferred net would lead to some increases in ITN use, but would not suddenly lead to everyone using ITNs all the time, given other factors contributing to low net use overall.

<h2>Durability monitoring data - do retention and care behaviors differ for ITNs of different colors?</h2>

It is possible that nets that are less preferred may be subject to less careful net care and repair behaviors, or given away at higher rates, or discarded earlier. Given the sample size and design of durability monitoring activities, it would be very difficult to trace back differences in net retention and physical integrity specifically to the net's color. We would likewise be cautious in relying on meta analyses of multi-country durability data to investigate the impact of color on retention and physical integrity, given the high rate of variation in durability for nets of the same brand over different geographic and social contexts. However, it may be useful to leverage this data when triangulating from household survey data and redemption rate data, and assess whether findings are aligned or misaligned.

```{r}

todor()
```

